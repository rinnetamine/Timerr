<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Timerr</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="media/favicon.ico" type="image/x-icon">
  </head>

  <body>
    <header>
      <h1>Timerr</h1>
      <nav>
        <!-- Desktop-only -->
        <ul id="pc-only">
          <li><a href="home.html">Browse</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="contact.html">Contact</a></li>

          <li class="dropdown">
            <a href="services.html" class="drop">Services ⮟</a>
            <ul class="dropdown-content"> 
              <li class="dropdown">
                <a href="list.html" class="drop">List ⮟</a>
                <ul class="dropdown-content nested"> 
                  <li><a href="#">Hottest</a></li>
                  <li><a href="#">Newest</a></li>
                </ul>  
              </li>
              <li><a href="request.html" class="drop">Request</a></li>
              <li><a href="offer.html">Offer</a></li>
            </ul>
          </li>
          <li><a href="#" id="loginBtn">Login</a></li>
          <li><a id="dark-mode-button" onclick="dark_mode()">Dark mode</a></li>
        </ul>
        
        <!--  icon -->
  <div id="hamburger" class="hamburger" onclick="toggleMenu()">&#9776;</div>

  <!-- Mobile-only -->
<ul id="mobile-only">
  <div id="hamburger" onclick="toggleMenu()">&times;</div>
  <li><a href="home.html">Browse</a></li>
  <li><a href="about.html">About</a></li>
  <li><a href="contact.html">Contact</a></li>
  <li>
    <a href="services.html">Services</a>
    <ul class="service-submenu">
      <li>
        <a href="list.html">List</a>
        <ul class="service-submenu-nested">
          <li><a href="#">Hottest</a></li>
          <li><a href="#">Newest</a></li>
        </ul>
      </li>
      <li><a href="request.html">Request</a></li>
      <li><a href="offer.html">Offer</a></li>
    </ul>
  </li>
  <li><a id="dark-mode-button" onclick="dark_mode()">Dark mode</a></li>
  <li><a href="#" id="loginBtn">Login</a></li>
</ul>

 <!-- log -->
 <div id="loginModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeLoginModal()">&times;</span>
    <h2>Login</h2>
    <form id="loginForm">
      <input type="text" id="username" placeholder="Username" required>
      <input type="password" id="password" placeholder="Password" required>
      <button type="submit" class="button-login">Login</button>
    </form>
    <p id="errorMessage" style="color:red;"></p>
    <button class="button-register" id="registerBtn" onclick="toggleToRegister()">Register</button>
  </div>
</div>

<!-- reg -->
<div id="registerModal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" onclick="closeRegisterModal()">&times;</span>
    <h2>Register</h2>
    <form id="registerForm">
      <input type="text" id="newUsername" placeholder="Username" required>
      <input type="password" id="newPassword" placeholder="Password" required>
      <button type="submit" class="button-login">Register</button>
    </form>
    <p id="registerMessage" style="color:red;"></p>
    <button class="button-register" id="loginBackBtn" onclick="toggleToLogin()">Back to Login</button>
  </div>
</div>

</nav>
</header>

    <main>
        <div id="adList"></div>
        <button id="createAdBtn" class="button-3">Create Advertisement</button>
    </main>


    <script>

//dark mode
function dark_mode() {
  var element = document.body;
  element.classList.toggle("dark-mode");}

// mobile version hamburger menu oppening
function toggleMenu() {
  const menu = document.getElementById("mobile-only");
  const hamburger = document.getElementById("hamburger");
  
  menu.classList.toggle("active");
  hamburger.classList.toggle("open");
}


// login modal 
document.getElementById("loginBtn").addEventListener("click", openLoginModal);

function openLoginModal() {
  document.getElementById("loginModal").style.display = "block";
}

function closeLoginModal() {
  document.getElementById("loginModal").style.display = "none";
}

function toggleToRegister() {
  document.getElementById("loginModal").style.display = "none";
  document.getElementById("registerModal").style.display = "block";
}

function toggleToLogin() {
  document.getElementById("registerModal").style.display = "none";
  document.getElementById("loginModal").style.display = "block";
}

document.getElementById("loginForm").onsubmit = function(event) {
  event.preventDefault();

  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;

  const users = JSON.parse(localStorage.getItem('users')) || [];
  const user = users.find(user => user.username === username && user.password === password);

  if (user) {
    alert("Login successful!");
    closeLoginModal();
  } else {
    document.getElementById("errorMessage").innerText = "Invalid credentials!";
  }
};

document.getElementById("registerForm").onsubmit = function(event) {
  event.preventDefault();

  const newUsername = document.getElementById("newUsername").value;
  const newPassword = document.getElementById("newPassword").value;

  const users = JSON.parse(localStorage.getItem('users')) || [];
  users.push({ username: newUsername, password: newPassword });
  localStorage.setItem('users', JSON.stringify(users));

  document.getElementById("registerMessage").innerText = "Registration successful! You can now log in.";
  setTimeout(() => {
    toggleToLogin(); 
  }, 2000);
};

function closeRegisterModal() {
  document.getElementById("registerModal").style.display = "none";
  document.getElementById("loginModal").style.display = "block";
}

document.getElementById("createAdBtn").addEventListener("click", createAd);

function createAd() {
  const adList = document.getElementById("adList");

  const adContainer = document.createElement("div");
  adContainer.classList.add("ad");

  adContainer.innerHTML = `
    <h3>EXAMPLE</h3>
    <p>EXAMPLE!</p>
    <button class="deleteAdBtn">Delete</button>
  `;

  // Append the new ad to the ad list
  adList.appendChild(adContainer);

  // Add delete functionality
  adContainer.querySelector(".deleteAdBtn").addEventListener("click", function() {
    adContainer.remove();
  });
}

</script>

</body>
</html>